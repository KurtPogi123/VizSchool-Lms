{{!
    This file is part of Moodle - https://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <https://www.gnu.org/licenses/>.
}}

{{!
    @template theme_nice/navbar

    Navigation bar layout template for theme_nice.

    Renders:
    - Site logo or site name
    - Responsive collapsible menu for mobile
    - Homepage and dashboard links
    - User menu for profile/logout
    - Optional search icon
    - Admin settings link (if user has permission)
    - Primary custom menu items
    - Responsive layout switching between desktop and mobile

    Context variables required for this template:
    * config.wwwroot - The Moodle site root URL.
    * config.homeurl - The Moodle dashboard URL.
    * sitehomeurl - The URL to the site homepage.
    * sitename - The site name text.
    * navbar_logo - The URL to the navbar logo image.
    * navbar_logo_width - Width of the navbar logo.
    * hasnavbarlogo - Boolean if navbar logo exists.
    * home_string - Text label for homepage link.
    * dashboard_string - Text label for dashboard link.
    * homepage_link_visibility - Boolean for showing the homepage link.
    * dashboard_link_visibility - Boolean for showing the dashboard link.
    * is_dashboard - Boolean indicating if the page is the dashboard.
    * isloggedin - Whether the user is logged in.
    * isguest - Whether the user is a guest user.
    * canaccessadmin - Boolean if user has site admin permissions.
    * primarymoremenu - Data structure for the primary navigation menu.
    * usermenu - Data structure for the user menu.
    * output - Contains:
        * output.navbar_plugin_output - HTML for plugin nav items.
        * output.search_box - Boolean to show search icon.
        * output.custom_menu - HTML for the custom menu.
        * output.edit_switch - HTML for the editing on/off switch.
    * searchurl - The URL to the search page.

    Partial templates used:
    * core/user_menu
    * theme_boost/primary-drawer-mobile

    Example context (JSON):
    {
        "config": {
            "wwwroot": "https://mymoodlesite.org",
            "homeurl": "https://mymoodlesite.org/my/"
        },
        "sitehomeurl": "https://mymoodlesite.org/",
        "sitename": "Nice Learning",
        "navbar_logo": "https://mymoodlesite.org/theme/image.php/theme_nice/theme/1700000000/navbarlogo",
        "navbar_logo_width": "180",
        "hasnavbarlogo": true,
        "home_string": "Home",
        "dashboard_string": "Dashboard",
        "homepage_link_visibility": true,
        "dashboard_link_visibility": true,
        "is_dashboard": false,
        "isloggedin": true,
        "isguest": false,
        "canaccessadmin": true,
        "primarymoremenu": "<ul>...</ul>",
        "usermenu": "<div>user menu</div>",
        "output": {
            "navbar_plugin_output": "<div>plugins</div>",
            "search_box": true,
            "custom_menu": "<ul><li>Custom</li></ul>",
            "edit_switch": "<a>Edit mode</a>"
        },
        "searchurl": "https://mymoodlesite.org/search/index.php"
    }
}}


<!--End container -->
<div class="nice-navbar-container">
   <div class="container">
    <nav class="navbar navbar-expand-lg d-flex justify-content-between align-items-center" style="padding:8px 0;">
         <!-- Logo Section -->
         <!-- Logo Section -->
<div class="navbar-brand-section">
   {{#is_dashboard}}
   <a href="{{{ config.homeurl }}}" class="navbar-brand d-md-flex align-items-center m-0 me-4 p-0">
   {{#hasnavbarlogo}}
<img src="{{navbar_logo}}" class="logo me-1" alt="{{sitename}}" style="width: 80px; max-width: 100%; height: auto;">
{{/hasnavbarlogo}}
   {{^hasnavbarlogo}}
   {{{ sitename }}}
   {{/hasnavbarlogo}}
   </a>
   {{/is_dashboard}}
   {{^is_dashboard}}
 <a href="{{{ sitehomeurl }}}" class="navbar-brand d-md-flex align-items-center m-0 me-2 p-0">
   {{#hasnavbarlogo}}
   <img src="{{navbar_logo}}" class="logo me-1" alt="{{sitename}}"
        style="width: calc({{navbar_logo_width}}px * 0.8); max-width: 100%; height: auto;">
   {{/hasnavbarlogo}}
   {{^hasnavbarlogo}}
   {{{ sitename }}}
   {{/hasnavbarlogo}}
   </a>
   {{/is_dashboard}}
</div>

         <!-- Mobile Toggle Button -->
         <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
         <i class="fa-solid fa-bars"></i>
         </button>

         <!-- Main Navigation Menu -->
         <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <div class="navbar-nav mx-auto d-flex flex-row">
               <!-- Main Menu Items from Figma Design -->
               <div class="nav-item dropdown me-4">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: #333; font-weight: 500;">
                     About
                  </a>
                  <ul class="dropdown-menu">
                     <li><a class="dropdown-item" href="#">About Us</a></li>
                     <li><a class="dropdown-item" href="#">Our Mission</a></li>
                     <li><a class="dropdown-item" href="#">Team</a></li>
                  </ul>
               </div>
               
               <div class="nav-item dropdown me-4">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: #333; font-weight: 500;">
                     Course
                  </a>
                  <ul class="dropdown-menu">
                     <li><a class="dropdown-item" href="#">All Courses</a></li>
                     <li><a class="dropdown-item" href="#">Categories</a></li>
                  </ul>
               </div>

               <div class="nav-item me-4">
                  <a class="nav-link" href="#" style="color: #333; font-weight: 500;">Reviews</a>
               </div>

               <div class="nav-item dropdown me-4">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: #333; font-weight: 500;">
                     Programmes
                  </a>
                  <ul class="dropdown-menu">
                     <li><a class="dropdown-item" href="#">Academic Programs</a></li>
                     <li><a class="dropdown-item" href="#">Professional Development</a></li>
                  </ul>
               </div>

               <div class="nav-item me-4">
                  <a class="nav-link" href="#" style="color: #333; font-weight: 500;">Plans</a>
               </div>

               <!-- Original Moodle Navigation Items (Hidden on larger screens, shown in mobile) -->
               <div class="d-lg-none">
                  {{#primarymoremenu}}
                  <div class="navbar-primary-navigation mt-3 pt-3 border-top">
                     <ul class="navbar-nav">
                        {{#homepage_link_visibility}}
                        <li class="nav-item">
                           <a class="nav-link" href="{{sitehomeurl}}">
                           {{home_string}}
                           </a>
                        </li>
                        {{/homepage_link_visibility}}
                        {{#isloggedin}}
                        {{#dashboard_link_visibility}}
                        <li class="nav-item">
                           <a class="nav-link" href="{{config.homeurl}}">
                           {{dashboard_string}}
                           </a>
                        </li>
                        {{/dashboard_link_visibility}}
                        {{/isloggedin}}
                        {{{output.custom_menu}}}
                     </ul>
                  </div>
                  {{/primarymoremenu}}
               </div>
            </div>

            <!-- Right Side Actions -->
         <div class="navbar-actions d-flex align-items-center ms-auto" style="gap: 10px;">
               <!-- Login/Sign Up Buttons (for guests) -->
               {{^isloggedin}}
              <div class="auth-buttons d-flex align-items-center">
                  <a href="{{{ config.wwwroot }}}/login/index.php" class="btn btn-outline-primary me-2" style="border: 1px solid #FF6B35; color: #FF6B35; background: transparent; border-radius: 8px; padding: 5px 16px; font-weight: 500; text-decoration: none;">
                     Login
                  </a>
                  <a href="{{{ config.wwwroot }}}/login/signup.php" class="btn btn-primary" style="background: #FF6B35; border: 1px solid #FF6B35; color: white; border-radius: 8px; padding: 5px 16px; font-weight: 500; text-decoration: none;">
                     Sign Up
                  </a>
               </div>
               {{/isloggedin}}

               <!-- User Navigation (for logged in users) -->
               {{#isloggedin}}
               <div class="d-none d-lg-flex">
                  <div id="usernavigation" class="d-flex ms-auto align-items-center" data-nice-type="user-navigation">
                     {{# output.search_box }}
                     {{^isguest}}
                     <div class="nice-search-container me-3">
                        <a href="{{searchurl}}" data-nice-is-guest="{{isguest}}" style="color: #666;">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        </a>
                     </div>
                     {{/isguest}}
                     {{/output.search_box }}
                     
                     {{{ output.navbar_plugin_output }}}
                     
                     <div class="d-flex align-items-stretch usermenu-container me-3" data-region="usermenu">
                        {{#usermenu}}
                        {{> core/user_menu }}
                        {{/usermenu}}
                     </div>
                     
                     {{#primarymoremenu}}
                     {{#canaccessadmin}}
                     <div class="nice-settings-container me-3">
                        <a class="nice-settings" href="{{{ config.wwwroot }}}/admin/search.php" aria-label="Settings" style="color: #666;">
                        <i class="fa-solid fa-gear"></i>
                        </a>
                     </div>
                     {{/canaccessadmin}}
                     {{/primarymoremenu}}
                     
                     <div class="d-none d-sm-block">
                        {{{ output.edit_switch }}}
                     </div>
                  </div>
               </div>
               {{/isloggedin}}
            </div>
         </div>
         <!--End collapse -->

         <!-- Hidden Search Form -->
         <div id="searchform-navbar" class="collapse d-none position-absolute" style="top: 100%; left: 0; right: 0; z-index: 1000;">
            <form autocomplete="off" action="#" method="get" accept-charset="utf-8"
               class="mform d-flex flex-wrap align-items-center searchform-navbar bg-white p-3 shadow">
               <input type="hidden" name="context" value="1">
               <div class="input-group">
                  <input type="text" class="form-control withclear"
                     placeholder="Search"
                     aria-label="Search"
                     name="q"
                     data-region="input"
                     autocomplete="off">
                  <label class="visually-hidden">Search</label>
                  <a class="btn btn-close collapsed"
                     data-action="closesearch"
                     data-bs-toggle="collapse"
                     href="#searchform-navbar"
                     role="button"
                     aria-expanded="false">
                  <span class="visually-hidden">Close</span>
                  </a>
                  <button type="submit" class="btn btn-submit" data-action="submit">
                  <i class="icon fa fa-magnifying-glass fa-fw" aria-hidden="true"></i>
                  <span class="visually-hidden">Search</span>
                  </button>
               </div>
            </form>
         </div>
      </nav>
   </div>
</div>
<!--End nice-navbar-container -->
{{> theme_boost/primary-drawer-mobile }}

<!-- Bootstrap 5 JS (required for burger menu to work) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>